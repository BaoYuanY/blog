<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>搭建博客</title>
    <url>/2023/05/23/build-blog/</url>
    <content><![CDATA[<p>11111</p>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS有关SSH配置</title>
    <url>/2023/05/24/centos-ssh-login/</url>
    <content><![CDATA[<h1 id="SSH的安装"><a href="#SSH的安装" class="headerlink" title="SSH的安装"></a>SSH的安装</h1><ol>
<li><p>首先，确保已在CentOS服务器上安装了openssh-server。通过运行以下命令检查是否已安装：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">yum list installed | grep openssh-server</span><br></pre></td></tr></table></figure></div>
<p>如果未安装，请使用以下命令安装：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">sudo yum install openssh-server</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>启动SSH服务并设置为开机自启动：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl start sshd</span><br><span class="line">sudo systemctl enable sshd</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>使用防火墙允许SSH连接。防火墙默认情况下会阻止SSH连接，因此需要通过以下命令打开SSH端口：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=ssh</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure></div>
<p>或者，如果要打开某个特定端口，如22，使用以下命令：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone=public --add-port=22/tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>编辑SSH配置文件，以添加或修改配置。使用文本编辑器编辑<code>/etc/ssh/sshd_config</code>文件：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></div>
<p>常见的配置选项包括：</p>
<ul>
<li>禁用ROOT登录：<code>PermitRootLogin no</code>。建议禁用Root登录，以增加安全性。</li>
<li>更改默认端口：将<code>Port</code>选项更改为所需端口（如<code>Port 2222</code>）。这可以帮助减少暴力攻击。</li>
<li>限制用户访问：例如，要仅允许用户alice和bob登录，需要添加<code>AllowUsers alice bob</code>。</li>
</ul>
<p>在编辑配置文件后，保存并关闭文件。</p>
</li>
<li><p>重启SSH服务，使更改生效：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart sshd</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>配置客户端。要从客户端登录到SSH服务器，需要在客户端生成SSH密钥（公钥和私钥）。在客户端运行以下命令：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure></div>
<p>按照提示操作，您将会创建一个新的密钥对。然后将公钥添加到CentOS服务器的<code>~/.ssh/authorized_keys</code>文件中：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-copy-id user@your_server_ip</span><br></pre></td></tr></table></figure></div>
<p>（将’user’和’your_server_ip’替换为实际的值）</p>
</li>
<li><p>现在您已经配置好SSH登录了。要登录到远程服务器，请从客户端运行以下命令：</p>
<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">ssh user@your_server_ip</span><br></pre></td></tr></table></figure></div>
<p>（将’user’和’your_server_ip’替换为实际的值）</p>
</li>
</ol>
<p>就这样，您已经配置并从客户端访问了新的CentOS服务器。保持登录安全！</p>
<h1 id="ssh空闲超时时间检测"><a href="#ssh空闲超时时间检测" class="headerlink" title="ssh空闲超时时间检测"></a>ssh空闲超时时间检测</h1><ol>
<li>使用文本编辑器（例如vi,nano,vim）编辑配置文件<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></div></li>
<li>找到 <code>ClientAliveInterval</code> 设置为600到900之间</li>
<li>重启 SSH 服务以使更改生效<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure></div></li>
</ol>
<h1 id="使用加密的远程管理ssh"><a href="#使用加密的远程管理ssh" class="headerlink" title="使用加密的远程管理ssh"></a>使用加密的远程管理ssh</h1><p><b>未使用安全套接字（如SSH）加密远程管理服务器可能会导致以下危害：</b></p>
<ul>
<li>数据泄露：未加密的通信容易被截获和窃听。黑客可以捕获传输中的敏感数据，如用户名、密码、配置文件和其他重要信息。</li>
<li>中间人攻击：未加密的连接容易受到中间人攻击。攻击者可能会拦截通信，修改数据，然后将其传输到接收者，而双方可能都不知道通信已被篡改。</li>
<li>暴力破解攻击：当传输未加密的用户名和密码时，攻击者可以尝试破解这些凭据以访问服务器。如果它们使用了弱密码，攻击者可能很容易就能破解密码。</li>
<li>会话劫持：在未加密的连接中，攻击者可以劫持用户会话，然后使用已登录的凭据对服务器进行操作。</li>
<li>恶意软件和后门程序：攻击者可能会通过未加密的连接传播恶意软件或植入后门，以便在以后对服务器进行攻击。这可能会导致数据损坏、丢失或被盗。</li>
<li>泄露IP地址：未加密的连接也会泄露使用者的IP地址，这可能导致IP被跟踪，进一步增加黑客攻击发现的可能性。</li>
</ul>
<ol>
<li>在sshd_config中添加或设置 <code>Protocol 2</code> <div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></div></li>
<li>重启 SSH 服务以使更改生效<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure></div></li>
</ol>
<h1 id="设置ssh登录白名单"><a href="#设置ssh登录白名单" class="headerlink" title="设置ssh登录白名单"></a>设置ssh登录白名单</h1><ol>
<li>在<code>/etc/hosts.deny</code>添加 <code>ALL:ALL</code></li>
<li>在<code>/etc/hosts.allow</code>添加 <code>sshd:192.168.1.1</code> <blockquote>
<p>192.168.1.1只是一个示例  需要根据自己情况去配置</p>
</blockquote>
</li>
</ol>
<h1 id="配置命令行超时退出"><a href="#配置命令行超时退出" class="headerlink" title="配置命令行超时退出"></a>配置命令行超时退出</h1><p><b>未配置命令行超时退出（也称为闲置超时）可能会带来以下隐患：</b></p>
<ul>
<li>未授权访问：如果有人在用户离开计算机时尝试访问已登录的SSH会话，他们可能会有权限执行高级任务或对系统进行更改。这特别适用于具有sudo权限的用户，因为他们能够执行危险的系统操作。</li>
<li>资源占用：对于运行多个SSH会话的用户，很容易忘记关闭其中的某个。这可能导致系统资源被长期占用，从而降低服务器的整体性能。</li>
<li>难以进行故障排查：如果没有超时设置，系统管理员在分析系统日志时可能发现很多未结束的SSH会话。这会使他们难以确定哪个SSH会话是可疑的或导致问题的，从而增加排查问题的难度。</li>
</ul>
<ol>
<li>在<code>/etc/profile</code>中添加<code>tmout=300</code><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/profile</span><br></pre></td></tr></table></figure></div></li>
<li>使更改生效<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></div></li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2023/06/09/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a class="link"   href="https://hexo.io/" >Hexo <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>! This is your very first post. Check <a class="link"   href="https://hexo.io/docs/" >documentation <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> for more info. If you get any problems when using Hexo, you can find the answer in <a class="link"   href="https://hexo.io/docs/troubleshooting.html" >troubleshooting <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> or you can ask me on <a class="link"   href="https://github.com/hexojs/hexo/issues" >GitHub <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure></div>

<p>More info: <a class="link"   href="https://hexo.io/docs/writing.html" >Writing <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure></div>

<p>More info: <a class="link"   href="https://hexo.io/docs/server.html" >Server <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure></div>

<p>More info: <a class="link"   href="https://hexo.io/docs/generating.html" >Generating <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure></div>

<p>More info: <a class="link"   href="https://hexo.io/docs/one-command-deployment.html" >Deployment <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
]]></content>
  </entry>
  <entry>
    <title>PHP坐标转换类</title>
    <url>/2023/06/09/php_coordinate/</url>
    <content><![CDATA[   <div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="code"><pre><span class="line">   &lt;?php</span><br><span class="line"></span><br><span class="line">namespace App\Service\Common;</span><br><span class="line"></span><br><span class="line">class CoordinateService</span><br><span class="line">&#123;</span><br><span class="line">    const x_PI = 52.35987755982988;</span><br><span class="line">    const PI   = 3.1415926535897932384626;</span><br><span class="line">    const a    = 6378245.0;</span><br><span class="line">    const ee   = 0.00669342162296594323;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 百度坐标系(BD-09) 转 火星坐标系(GCJ-02)</span><br><span class="line">     * @param $bd_lon</span><br><span class="line">     * @param $bd_lat</span><br><span class="line">     * @return float[]</span><br><span class="line">     */</span><br><span class="line">    public static function bd09ToGcj02($bd_lon, $bd_lat): array</span><br><span class="line">    &#123;</span><br><span class="line">        $x     = $bd_lon - 0.0065;</span><br><span class="line">        $y     = $bd_lat - 0.006;</span><br><span class="line">        $z     = sqrt($x * $x + $y * $y) - 0.00002 * sin($y * self::x_PI);</span><br><span class="line">        $theta = atan2($y, $x) - 0.000003 * cos($x * self::x_PI);</span><br><span class="line">        $g_lon = $z * cos($theta);</span><br><span class="line">        $g_lat = $z * sin($theta);</span><br><span class="line">        return array(&#x27;lon&#x27; =&gt; $g_lon, &#x27;lat&#x27; =&gt; $g_lat);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 火星坐标系(GCJ-02) 转 百度坐标系(BD-09)</span><br><span class="line">     * 即谷歌、高德 转 百度</span><br><span class="line">     * @param $g_lon</span><br><span class="line">     * @param $g_lat</span><br><span class="line">     * @return float[]</span><br><span class="line">     */</span><br><span class="line">    public static function gcj02Tobd09($g_lon, $g_lat): array</span><br><span class="line">    &#123;</span><br><span class="line">        $z      = sqrt($g_lon * $g_lon + $g_lat * $g_lat) + 0.00002 * sin($g_lat * self::x_PI);</span><br><span class="line">        $theta  = atan2($g_lat, $g_lon) + 0.000003 * cos($g_lon * self::x_PI);</span><br><span class="line">        $bd_lon = $z * cos($theta) + 0.0065;</span><br><span class="line">        $bd_lat = $z * sin($theta) + 0.006;</span><br><span class="line">        return array(&#x27;lon&#x27; =&gt; $bd_lon, &#x27;lat&#x27; =&gt; $bd_lat);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * WGS84 转 GCj02</span><br><span class="line">     * @param $w_lon</span><br><span class="line">     * @param $w_lat</span><br><span class="line">     * @return float[]</span><br><span class="line">     */</span><br><span class="line">    public static function wgs84ToGcj02($w_lon, $w_lat): array</span><br><span class="line">    &#123;</span><br><span class="line">        $dlat      = self::transFormLat($w_lon - 105.0, $w_lat - 35.0);</span><br><span class="line">        $dlon      = self::transFormLon($w_lon - 105.0, $w_lat - 35.0);</span><br><span class="line">        $radlat    = $w_lat / 180.0 * self::PI;</span><br><span class="line">        $magic     = sin($radlat);</span><br><span class="line">        $magic     = 1 - self::ee * $magic * $magic;</span><br><span class="line">        $sqrtmagic = sqrt($magic);</span><br><span class="line">        $dlat      = ($dlat * 180.0) / ((self::a * (1 - self::ee)) / ($magic * $sqrtmagic) * self::PI);</span><br><span class="line">        $dlon      = ($dlon * 180.0) / (self::a / $sqrtmagic * cos($radlat) * self::PI);</span><br><span class="line">        $g_lat     = $w_lat + $dlat;</span><br><span class="line">        $g_lon     = $w_lon + $dlon;</span><br><span class="line">        return array(&#x27;lon&#x27; =&gt; $g_lon, &#x27;lat&#x27; =&gt; $g_lat);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * GCJ02 转换为 WGS84</span><br><span class="line">     * @param $g_lon</span><br><span class="line">     * @param $g_lat</span><br><span class="line">     * @return float[]</span><br><span class="line">     */</span><br><span class="line">    public static function gcj02ToWgs84($g_lon, $g_lat): array</span><br><span class="line">    &#123;</span><br><span class="line">        $dlat      = self::transFormLat($g_lon - 105.0, $g_lat - 35.0);</span><br><span class="line">        $dlon      = self::transFormLon($g_lon - 105.0, $g_lat - 35.0);</span><br><span class="line">        $radlat    = $g_lat / 180.0 * self::PI;</span><br><span class="line">        $magic     = sin($radlat);</span><br><span class="line">        $magic     = 1 - self::ee * $magic * $magic;</span><br><span class="line">        $sqrtmagic = sqrt($magic);</span><br><span class="line">        $dlat      = ($dlat * 180.0) / ((self::a * (1 - self::ee)) / ($magic * $sqrtmagic) * self::PI);</span><br><span class="line">        $dlon      = ($dlon * 180.0) / (self::a / $sqrtmagic * cos($radlat) * self::PI);</span><br><span class="line">        $w_lat     = $g_lat + $dlat;</span><br><span class="line">        $w_lon     = $g_lon + $dlon;</span><br><span class="line">        return array(&#x27;lon&#x27; =&gt; $w_lon, &#x27;lat&#x27; =&gt; $w_lat);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * BD09 转换为 WGS84</span><br><span class="line">     * @param $bd_lon</span><br><span class="line">     * @param $bd_lat</span><br><span class="line">     * @return float[]</span><br><span class="line">     */</span><br><span class="line">    public static function bd09ToWgs84($bd_lon, $bd_lat): array</span><br><span class="line">    &#123;</span><br><span class="line">        $gcj02 = self::bd09ToGcj02($bd_lon, $bd_lat);</span><br><span class="line">        $g_lon = $gcj02[&#x27;lon&#x27;];</span><br><span class="line">        $g_lat = $gcj02[&#x27;lat&#x27;];</span><br><span class="line">        $wgs84 = self::gcj02ToWgs84($g_lon, $g_lat);</span><br><span class="line">        return $wgs84;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * WGS84 转换为 BD09</span><br><span class="line">     * @param $w_lon</span><br><span class="line">     * @param $w_lat</span><br><span class="line">     * @return float[]</span><br><span class="line">     */</span><br><span class="line">    public static function wgs84ToBd09($w_lon, $w_lat): array</span><br><span class="line">    &#123;</span><br><span class="line">        $gcj02 = self::wgs84ToGcj02($w_lon, $w_lat);</span><br><span class="line">        $g_lon = $gcj02[&#x27;lon&#x27;];</span><br><span class="line">        $g_lat = $gcj02[&#x27;lat&#x27;];</span><br><span class="line">        $bd09  = self::gcj02Tobd09($g_lon, $g_lat);</span><br><span class="line">        return $bd09;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 转换纬度</span><br><span class="line">     * @param $lon</span><br><span class="line">     * @param $lat</span><br><span class="line">     * @return float</span><br><span class="line">     */</span><br><span class="line">    protected static function transFormLat($lon, $lat): float</span><br><span class="line">    &#123;</span><br><span class="line">        $ret = -100.0 + 2.0 * $lon + 3.0 * $lat + 0.2 * $lat * $lat + 0.1 * $lon * $lat + 0.2 * sqrt(abs($lon));</span><br><span class="line">        $ret += (20.0 * sin(6.0 * $lon * self::PI) + 20.0 * sin(2.0 * $lon * self::PI)) * 2.0 / 3.0;</span><br><span class="line">        $ret += (20.0 * sin($lat * self::PI) + 40.0 * sin($lat / 3.0 * self::PI)) * 2.0 / 3.0;</span><br><span class="line">        $ret += (160.0 * sin($lat / 12.0 * self::PI) + 320 * sin($lat * self::PI / 30.0)) * 2.0 / 3.0;</span><br><span class="line">        return $ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 转换经度</span><br><span class="line">     * @param $lon</span><br><span class="line">     * @param $lat</span><br><span class="line">     * @return float</span><br><span class="line">     */</span><br><span class="line">    protected static function transFormLon($lon, $lat): float</span><br><span class="line">    &#123;</span><br><span class="line">        $ret = 300.0 + $lon + 2.0 * $lat + 0.1 * $lon * $lon + 0.1 * $lon * $lat + 0.1 * sqrt(abs($lon));</span><br><span class="line">        $ret += (20.0 * sin(6.0 * $lon * self::PI) + 20.0 * sin(2.0 * $lon * self::PI)) * 2.0 / 3.0;</span><br><span class="line">        $ret += (20.0 * sin($lon * self::PI) + 40.0 * sin($lon / 3.0 * self::PI)) * 2.0 / 3.0;</span><br><span class="line">        $ret += (150.0 * sin($lon / 12.0 * self::PI) + 300.0 * sin($lon / 30.0 * self::PI)) * 2.0 / 3.0;</span><br><span class="line">        return $ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>






]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
</search>
